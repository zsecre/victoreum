<!-- Include Firebase SDK -->
<div id="code"></div>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>

<script>
  // Your Firebase configuration
  const firebaseConfig = {
        apiKey: "AIzaSyBB3gfZtcvPBs1G4fbezMU9EdeK6u261To",
        authDomain: "victoreumgames-drop.firebaseapp.com",
        projectId: "victoreumgames-drop",
        storageBucket: "victoreumgames-drop.appspot.com",
        messagingSenderId: "396211397518",
        appId: "1:396211397518:web:6f22a52c394ff3cdeebadf",
        measurementId: "G-QMQ4E1WJQC"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

  // Function to generate random 7-character uppercase code
  function generateCode() {
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let result = '';
    for (let i = 0; i < 7; i++) {
      result += characters.charAt(Math.floor(Math.random() * characters.length));
    }
    return result;
  }

  // Update Firestore document
  async function updateClaimCode() {
    const userData = {
            code: generateCode()
        };

        try {
            await db.collection('claim-code').doc("code").set(userData);
            document.getElementById('code').innerText = `${userData.code}`;
            
        } catch (error) {
            console.error('Firebase error:', error);
            alert('Error saving data: ' + error.message);
        }
    };

  // Run the update function
  updateClaimCode();
</script>
